title: Home
views:
  - title: default_view
    icon: mdi:home
    badges: 
      - entity: sensor.weather_pws_precip_rate
      - entity: sensor.weather_pws_precip_12am
      #- entity: sensor.weather_pws_precip_month
      - entity: sensor.rainfall_this_month
      - entity: sensor.weather_pws_wind_dir
      - entity: sensor.weather_pws_wind_speed
      - entity: sensor.weather_pws_wind_gust
     # - entity: sensor.pool_temperature
     # - entity: switch.christmas_tree
    cards:
    - type: vertical-stack
      title: Lights      
      cards:
      - type: horizontal-stack
        cards:
        - type: button
          entity: scene.lights_on
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.lights_on
        - type: button
          entity: scene.bedtime_scene
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.bedtime_scene
        - type: button
          entity: scene.goodnight_scene
          name: 'Good Night'
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.goodnight_scene
        - type: button
          entity: scene.gaming_time
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.gaming_time
        - type: button
          entity: scene.reset_bedroom_lights
          name: "Reset Bedroom"
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.reset_bedroom_lights
      - type: horizontal-stack
        cards:
        - type: custom:slider-button-card #light
          entity: light.bedroom
          name: Bedroom
          action_button:
            tap_action: 
              action: toggle
          icon:
            action: more-info           
          
        - type: custom:slider-button-card
          entity: light.kitchen
          action_button:
            tap_action: 
              action: toggle
          icon:
            action: more-info            
        - type: custom:slider-button-card
          entity: light.loungeroom
          action_button:
            tap_action: 
              action: toggle
          icon:
            action: more-info            
      - type: horizontal-stack
        cards:
        - type: custom:slider-button-card
          entity: light.hallway
          name: Hallway
          action_button:
            tap_action: 
              action: toggle
          icon:
            action: more-info            
        - type: custom:slider-button-card
          entity: light.pantry
          name: Pantry
          action_button:
            tap_action: 
              action: toggle
          icon:
            action: more-info            
        - type: custom:slider-button-card
          entity: light.bathroom
          name: Bathroom
          action_button:
            tap_action: 
              action: toggle
          icon:
            action: more-info            
      - type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
          - type: custom:slider-button-card
            entity: light.wardrobe  
            action_button:
              show: false
          - type: custom:slider-button-card
            entity: light.dining_room
            action_button:
              show: false            
          - type: custom:slider-button-card
            entity: light.niche
            action_button:
              show: false            
        - type: horizontal-stack
          cards:          
          - type: custom:slider-button-card
            entity: light.gym
            action_button:
              show: false            
          - type: custom:slider-button-card
            entity: light.outside
            action_button:
              show: false     
          - type: custom:slider-button-card
            entity: switch.pool_lights
            action_button:
              show: false       
            icon: 
              icon: mdi:lightbulb

        - type: horizontal-stack
          cards:          
          - type: custom:slider-button-card
            entity: light.office
            action_button:
              tap_action: 
                action: toggle           
          - type: custom:slider-button-card
            entity: light.garage
            action_button:
              show: false          


      - type: vertical-stack
        title: Circadian Lighting
        cards:
        - type: horizontal-stack
          cards:
          - type: custom:button-card
            entity: switch.adaptive_lighting_loungeroom
            name: Loungeroom
            icon: mdi:theme-light-dark
            size: 80%
            hold_action:
              action: more-info
          - type: custom:button-card
            entity: switch.adaptive_lighting_bedroom
            name: Bedroom
            icon: mdi:theme-light-dark
            size: 80%
            hold_action:
              action: more-info
          - type: custom:button-card
            entity: switch.adaptive_lighting_kitchen
            name: Kitchen
            icon: mdi:theme-light-dark
            size: 80%
            hold_action:
              action: more-info
          - type: custom:button-card
            entity: switch.adaptive_lighting_hallway
            name: Hallway
            icon: mdi:theme-light-dark
            size: 80%
            hold_action:
              action: more-info
      - type: history-graph
        #title: Temperature Graph
        hours_to_show: 36
        refresh_interval: 1
        entities:
          - switch.adaptive_lighting_bedroom
          - switch.adaptive_lighting_loungeroom
          - switch.adaptive_lighting_kitchen
          - switch.adaptive_lighting_hallway

    - type: vertical-stack
      title: "Switches"
      cards:
      - type: horizontal-stack
        cards:
        - type: button
          entity: switch.coffee_machine
          icon: mdi:coffee-maker
        - type: button
          entity: switch.cooking_light
          icon: mdi:chef-hat
        - type: button
          entity: switch.mozzie_zapper
          icon: mdi:flash-outline          
        
      - type: horizontal-stack
        cards:
        - type: button
          entity: switch.danny_s_pc
          icon: mdi:desktop-classic
        - type: button
          entity: switch.racing_pc
         # icon: mdi:google-controller 
        - type: button
          entity: switch.pc_speaker    

      #- type: horizontal-stack
      #  cards:
       # - type: button
       #   entity: switch.t300_wheel_switch
       # - type: button
       #   entity: switch.cat_fountain_switch          
       # - type: custom:button-card
       #   color_type: blank-card          


      - type: horizontal-stack
        cards:
        - type: button
          entity: input_boolean.bedtime_triggered
          icon: mdi:bed-king
        - type: button
          entity: switch.amiibo_cabinet_switch          
        - type: button
          entity: switch.back_sprinkler
          icon: mdi:sprinkler-variant         
      #  - type: button
      #    entity: automation.back_sprinkler_before_sunset
      #    icon: mdi:timer-outline
      #    name: Sprinkler Automation    

      - type: picture-entity
        entity: cover.garage_door
        #name: General Waste
        show_name: true
        state_image:
          "open": /local/pics/garage_open.jpg
          "closed": /local/pics/garage_closed.jpg
        double_tap_action:
          action: toggle
        #state_filter:
        #  "Not Today": grayscale(85%)
        #  "Today": contrast(200%)"

    #- type: horizontal-stack
    #  title: Climate Control
    #  cards:
    #  - type: vertical-stack
    #    cards:
    #    - type: thermostat
    #      entity: climate.loungeroom_aircon
    #    - type: thermostat
    #      entity: climate.gym_aircon
    #  - type: vertical-stack
    #    cards:          
    #    - type: thermostat
    #      entity: climate.bedroom_aircon
    #    - type: thermostat
    #      entity: climate.office_aircon
    - type: vertical-stack
      title: Climate Control
      cards:
      - type: custom:mini-climate
        entity: climate.office_aircon
        hvac_mode:
          #style: "(value, entity) => ({ color: 'black' })"
          source:
            'off':
              icon: mdi:power
              name: 'off'
            heat_cool:
              icon: mdi:cached
              name: auto
            cool:
              icon: mdi:snowflake
              name: cool
            heat:
              icon: mdi:weather-sunny
              name: heat            
            dry:
              icon: mdi:water
              name: dry
            fan_only:
              icon: mdi:fan
              name: fan
          change_action: >
            (selected, entity) => this.call_service('climate', 'set_hvac_mode', { entity_id: entity.entity_id, hvac_mode: selected })
        buttons:
          swing_mode:
            type: dropdown
            icon: mdi:approximately-equal
            state:
              attribute: swing_mode
              mapper: >
                (state,entity) => (state === 'VerticalOff' ? 'off': 'on')
              #mapper: "(state,entity) => (state ? 'on': 'off')"
            #style: >
            #  (value) => (value = 'VerticalOff' ? { color: 'black'} : {})
            active: state => state !== 'off'
            source:
              VerticalOff: 'Off'
              VerticalSwing: 'Vertical Swing'
            change_action: >
              (selected, state, entity) => this.call_service('climate', 'set_swing_mode', { entity_id: entity.entity_id, swing_mode: selected })
      - type: custom:mini-climate
        entity: climate.bedroom_aircon
        hvac_mode:
          #style: "(value, entity) => ({ color: 'black' })"
          source:
            'off':
              icon: mdi:power
              name: 'off'
            auto:
              icon: mdi:cached
              name: auto
            cool:
              icon: mdi:snowflake
              name: cool
            heat:
              icon: mdi:weather-sunny
              name: heat            
            dry:
              icon: mdi:water
              name: dry
            fan_only:
              icon: mdi:fan
              name: fan
          change_action: >
            (selected, entity) => this.call_service('climate', 'set_hvac_mode', { entity_id: entity.entity_id, hvac_mode: selected })
        buttons:
          swing_mode:
            type: dropdown
            icon: mdi:approximately-equal
            state:
              attribute: swing_mode
              mapper: >
                (state,entity) => (state === 'VerticalOff' ? 'off': 'on')
              #mapper: "(state,entity) => (state ? 'on': 'off')"
            #style: >
            #  (value) => (value = 'VerticalOff' ? { color: 'black'} : {})
            active: state => state !== 'off'
            source:
              VerticalOff: 'Off'
              VerticalSwing: 'Vertical Swing'
            change_action: >
              (selected, state, entity) => this.call_service('climate', 'set_swing_mode', { entity_id: entity.entity_id, swing_mode: selected })   
      - type: custom:mini-climate
        entity: climate.loungeroom_aircon
        hvac_mode:
          #style: "(value, entity) => ({ color: 'black' })"
          source:
            'off':
              icon: mdi:power
              name: 'off'
            heat_cool:
              icon: mdi:cached
              name: auto
            cool:
              icon: mdi:snowflake
              name: cool
            heat:
              icon: mdi:weather-sunny
              name: heat            
            dry:
              icon: mdi:water
              name: dry
            fan_only:
              icon: mdi:fan
              name: fan
          change_action: >
            (selected, entity) => this.call_service('climate', 'set_hvac_mode', { entity_id: entity.entity_id, hvac_mode: selected })
        buttons:
          swing_mode:
            type: dropdown
            icon: mdi:approximately-equal
            state:
              attribute: swing_mode
              mapper: >
                (state,entity) => (state === 'VerticalOff' ? 'off': 'on')
              #mapper: "(state,entity) => (state ? 'on': 'off')"
            #style: >
            #  (value) => (value = 'VerticalOff' ? { color: 'black'} : {})
            active: state => state !== 'off'
            source:
              VerticalOff: 'Off'
              VerticalSwing: 'Vertical Swing'
            change_action: >
              (selected, state, entity) => this.call_service('climate', 'set_swing_mode', { entity_id: entity.entity_id, swing_mode: selected })    
      - type: custom:mini-climate
        entity: climate.gym_aircon
        hvac_mode:
          #style: "(value, entity) => ({ color: 'black' })"
          source:
            'off':
              icon: mdi:power
              name: 'off'
            auto:
              icon: mdi:cached
              name: auto
            cool:
              icon: mdi:snowflake
              name: cool
            heat:
              icon: mdi:weather-sunny
              name: heat            
            dry:
              icon: mdi:water
              name: dry
            fan_only:
              icon: mdi:fan
              name: fan
          change_action: >
            (selected, entity) => this.call_service('climate', 'set_hvac_mode', { entity_id: entity.entity_id, hvac_mode: selected })
        buttons:
          swing_mode:
            type: dropdown
            icon: mdi:approximately-equal
            state:
              attribute: swing_mode
              mapper: >
                (state,entity) => (state === 'VerticalOff' ? 'off': 'on')
              #mapper: "(state,entity) => (state ? 'on': 'off')"
            #style: >
            #  (value) => (value = 'VerticalOff' ? { color: 'black'} : {})
            active: state => state !== 'off'
            source:
              VerticalOff: 'Off'
              VerticalSwing: 'Vertical Swing'
            change_action: >
              (selected, state, entity) => this.call_service('climate', 'set_swing_mode', { entity_id: entity.entity_id, swing_mode: selected })                                         
    - type: custom:slider-button-card
      entity: fan.loungeroom_fan
        
    - type: vertical-stack
      title: Bins
      cards:
      - type: horizontal-stack
        cards:
        - type: picture-entity
          entity: sensor.green_bin_today
          #name: General Waste
          image: /local/pics/green_bin.jpg
          show_name: false
          show_state: false
          state_filter:
            "Not Today": grayscale(85%) blur(2px)
            "Today": contrast(200%)"
        - type: picture-entity
          entity: sensor.recycling_bin_today
          #name: Recycling Waste
          image: /local/pics/recycle_bin.jpg
          show_name: false
          show_state: false
          state_filter:
            "Not Today": grayscale(85%) blur(2px)
            "Today": contrast(200%)"
      - type: markdown
        content: |
          {% if is_state('sensor.recycling_bin_today','Today') %}
          Today is recycle bin day
          Next green bin day is in {{ states.sensor.green_bin_today.attributes.days | round(0) }} days
          {% elif is_state('sensor.green_bin_today','Today') %}
          Today is green bin day
          Next recycle bin day is in {{ states.sensor.recycling_bin_today.attributes.days | round(0) }} days
          {% elif states.sensor.recycling_bin_today.attributes.days > states.sensor.green_bin_today.attributes.days %}
          Next up is green bin in {{ states.sensor.green_bin_today.attributes.days | round(0)  }} days
          {% else %}
          Next up is recycling bin in {{ states.sensor.recycling_bin_today.attributes.days | round(0) }} days
          {% endif %}

    - type: vertical-stack
      title: "Temps"
      cards:
      - type: horizontal-stack
        cards:
        - type: custom:mini-graph-card
          name: Outside
          entities:
            - entity: sensor.weather_pws_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true
        - type: custom:mini-graph-card
          name: Office
          entities:
            - entity: sensor.office_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true            
      - type: horizontal-stack
        cards:
        
        - type: custom:mini-graph-card
          name: BOM Caloundra West
          entities:
            - entity: sensor.beerburrum_temp
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true
        - type: custom:mini-graph-card
          name: Gym
          entities:
            - entity: sensor.gym_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true            
      - type: horizontal-stack
        cards:
        - type: custom:mini-graph-card
          name: Bedroom
          entities:
            - entity: sensor.bedroom_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true
        - type: custom:mini-graph-card
          name: Loungeroom
          entities:
            - entity: sensor.loungeroom_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true
      - type: horizontal-stack
        cards:
        - type: custom:mini-graph-card
          name: Garage
          entities:
            - entity: sensor.garage_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true
            
        - type: custom:mini-graph-card
          name: Pantry
          entities:
            - entity: sensor.pantry_temperature
          hours_to_show: 72
          points_per_hour: 2
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 15
              color: "#5DADE2"
            - value: 24
              color: "#9CCC65"
            - value: 30
              color: "#F44336"
          show:
            labels: true
      - type: custom:mini-graph-card
        name: Pool
        entities:
          - entity: sensor.pool_temperature
        hours_to_show: 72
        points_per_hour: 2
        color_thresholds:
          - value: 15
            color: "#5DADE2"
          - value: 24
            color: "#9CCC65"
          - value: 35
            color: "#F44336"
        show:
          labels: true
             
      - type: custom:mini-graph-card
        name: Humidity
        entities:
          - entity: sensor.pantry_humidity
          - entity: sensor.loungeroom_humidity
          - entity: sensor.office_humidity
          - entity: sensor.gym_humidity 
          - entity: sensor.bedroom_humidity
          - entity: sensor.weather_pws_humidity
        hours_to_show: 144
        points_per_hour: 2
        #color_thresholds:
        #  - value: 100
        #    color: "#5DADE2"
        #  - value: 90
        #    color: "#5DADE2"
        #  - value: 70
        #    color: "#9CCC65"
        #  - value: 50
        #    color: "#F44336"
        show:
          labels: true
    - type: horizontal-stack
      title: "Sensors"
      cards:
        - type: glance
          columns: 3
          entities:
            - entity: group.back_door
              name: Back Door
              show_state: false
              icon: mdi:door
            - entity: binary_sensor.door_garage_internal
              name: Garage Internal Door
              show_state: false
              icon: mdi:door              
            - entity: binary_sensor.motion_sensor_pantry
              name: Pantry Motion
              show_state: false              
            - entity: binary_sensor.motion_sensor_bedroom
              name: Bedroom Motion
              show_state: false
            - entity: binary_sensor.motion_sensor_wardrobe
              name: Wardrobe Motion
              show_state: false  
            - entity: binary_sensor.motion_sensor_office
              name: Office Motion
              show_state: false                    

    - type: grid
      title: "Certificates"          
      cards:
        - type: gauge
          entity: sensor.chicane_me
          max: 90
        - type: gauge
          entity: sensor.home_chicane_me  
          max: 90
        - type: gauge
          entity: sensor.whitehavendesignhouse_com_au
          max: 90 

  - title: Energy
    icon: mdi:solar-power-variant
    badges:
      - entity: sensor.caloundra_west_temp_max_0
        name: Todays High     
      - entity: sensor.weather_pws_temperature
        name: Outside Temp
      - entity: sensor.loungeroom_temperature
        name: Lounge Temp   
      - entity: sensor.office_temperature
        name: Office Temp      
      - entity: sensor.solar_export_hourly_snapshot
        name: Export Last Hour    

    cards:
      - type: vertical-stack
        title: Live
        cards:
        - type: custom:power-flow-card
          entities:
            grid: 
              consumption: sensor.energy_grid_import
              production: sensor.energy_grid_export
            solar: sensor.inverter_generation
          kw_decimals: 2
          w_decimals: 0
        - type: custom:apexcharts-card
          experimental:
            #color_threshold: true
            brush: true # This is required
          graph_span: 30h
          #span:
          #  start: day
          #  end: +1h
          header:
            title: Live Solar Generation
            show: true
            show_states: true
            colorize_states: true
          brush:
            # selection_span: optional
            # defines the default selected span in the brush
            # Defaults to 1/4 of the `graph_span`
            selection_span: 6h
            apex_config:
          series:
          - entity: sensor.inverter_generation #sensor.inverter_5010kmst233w0080 
            stroke_width: 2
            type: area
            show:
              # in_brush: set it to true and the serie will show up in the brush
              in_brush: true
          - entity: sensor.energy_grid_export
            stroke_width: 2
          - entity: sensor.energy_grid_import
            color: orange
            stroke_width: 2
            invert: true
            #curve: straight
          - entity: sensor.homekit_91000hku21b00500
            stroke_width: 2
            invert: true
            type: area     
      - type: energy-date-selection
      - type: energy-usage-graph
      - type: energy-solar-graph
      - type: vertical-stack
        title: Today
        cards:
        - type: energy-distribution
          # link_dashboard: true
        - type: horizontal-stack
          cards:
          - type: energy-self-sufficiency-gauge  
          - type: energy-solar-consumed-gauge  
      - type: custom:apexcharts-card
        experimental:
          #color_threshold: true
          brush: true # This is required
        graph_span: 12h
        #span:
        #  start: day
        #  end: +1h
        header:
          title: Inverter Generation
          show: true
          show_states: true
          colorize_states: true
        brush:
          # selection_span: optional
          # defines the default selected span in the brush
          # Defaults to 1/4 of the `graph_span`
          selection_span: 6h
          apex_config:
        series:
        #- entity: sensor.inverter_5010kmst233w0080 
        #  stroke_width: 2
        #  show:
        #    # in_brush: set it to true and the serie will show up in the brush
        #    in_brush: true
        - entity: sensor.inverter_generation
          stroke_width: 2
          show:
            # in_brush: set it to true and the serie will show up in the brush
            in_brush: true
       






  - title: Secondary
    icon: mdi:home-analytics
    cards:
#      - type: weather-forecast
#        entity: weather.caloundra_west
      - type: entities
        title: Bedroom
        show_header_toggle: false
        entities:
          - light.bedroom
          - light.bedroom_night_lamps
          - light.bathroom
          - switch.bedroom_heater
          - sensor.bedroom_temperature
          - sensor.bedroom_temp_feels_like
          - sensor.bedroom_humidity
          - sensor.bedroom_pressure
          - input_number.heater_off_above_temp
          - input_number.heater_on_below_temp
          - script.bedroom_reading
          - scene.reset_bedroom_lights
          - scene.bedtime_scene

      - type: entities
        title: Gym
        show_header_toggle: true
        entities:
          - switch.danny_s_pc
          - climate.gym_aircon
          - sensor.gym_temperature
          - sensor.gym_temp_feels_like
          - sensor.gym_humidity
          - sensor.gym_pressure
          - sensor.home_chicane_me
          - sensor.chicane_me
          - sensor.whitehavendesignhouse_com_au

      - type: entities
        title: Loungeroom
        show_header_toggle: true
        entities:
          - light.loungeroom
          - climate.loungeroom_aircon
          - sensor.loungeroom_temperature
          - sensor.loungeroom_temp_feels_like
          - sensor.loungeroom_humidity
          - sensor.loungeroom_pressure
          - switch.christmas_tree

      - type: entities
        title: Outside
        show_header_toggle: true
        entities:
          - switch.mozzie_zapper
          - sensor.weather_pws_temperature
          - sensor.outside_temp_feels_like
          - sensor.weather_pws_humidity
          - group.back_door

      - type: entities
        title: Garage
        show_header_toggle: false
        entities:
          - cover.garage_door
          - sensor.garage_temperature
          - sensor.garage_temp_feels_like
          - sensor.garage_humidity
          - sensor.garage_pressure

      - type: entities
        title: Kitchen
        show_header_toggle: true
        entities:
          - light.kitchen
          - light.pantry
          - switch.coffee_machine
          - switch.cooking_light
      - type: entities
        title: Hallway
        show_header_toggle: true
        entities:
          - light.hallway
          - light.hallway_1
          - light.hallway_2
      - type: entities
        title: Home Assistant
        show_header_toggle: false
        entities:
          - input_boolean.on_holidays
          - sensor.current_version
          - sensor.current_hass_release
          - sensor.hacs
          - sensor.current_docker_hass_build
          - sensor.current_docker_portainer_build

      - type: entities
        title: Phones
        show_header_toggle: false
        entities:
          - sensor.ichicane_battery_level
          - sensor.ichicane_battery_state
          - sensor.chicanepad_battery_level
          - sensor.chicanepad_battery_state
          - sensor.duffel_battery_level
          - sensor.duffel_battery_state

#  - title: Lights
#    icon: mdi:lightbulb
#    cards:
#      - type: "custom:light-entity-card"
#        entity: light.kitchen
#        persist_features: true
#        #brightness: true
#        #color_temp: true
#        #white_value: true
#      - type: "custom:light-entity-card"
#        entity: light.loungeroom
#        persist_features: true
#      - type: "custom:light-entity-card"
#        entity: light.hallway
#        persist_features: true
#      - type: "custom:light-entity-card"
#        entity: light.bedroom
#        persist_features: true

  - title: Graph
    icon: mdi:chart-areaspline
    cards:
      
      - type: history-graph
        title: Rain
        hours_to_show: 72
        refresh_interval: 60
        entities:
          - entity: sensor.weather_pws_precip_month
            name: Monthly
      - type: history-graph
        title: Temperature Graph
        hours_to_show: 48
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_temperature
            name: Bedroom
          - entity: sensor.loungeroom_temperature
            name: Loungeroom
          - entity: sensor.office_temperature
            name: Office  
          - entity: sensor.gym_temperature
            name: Gym
          - entity: sensor.garage_temperature
            name: Garage
          - entity: sensor.weather_pws_temperature
            name: Outside
          - entity: sensor.pantry_temperature
            name: Pantry            
#          - entity: sensor.bom_sunshine_coast_air_temp_c
#            name: BOM Sunshine Coast
      - type: history-graph
        title: Humidity Graph
        hours_to_show: 48
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_humidity
            name: Bedroom
          - entity: sensor.loungeroom_humidity
            name: Loungeroom
          - entity: sensor.office_humidity
            name: Office            
          - entity: sensor.gym_humidity
            name: Gym
          - entity: sensor.garage_humidity
            name: Garage
          - entity: sensor.weather_pws_humidity
            name: Outside
          - entity: sensor.pantry_humidity
            name: Pantry
#         - entity: sensor.bom_sunshine_coast_relative_humidity
#            name: BOM Sunshine Coast
      - type: history-graph
        title: Pressure Graph
        hours_to_show: 48
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_pressure
            name: Bedroom
          - entity: sensor.loungeroom_pressure
            name: Loungeroom          
          - entity: sensor.office_pressure
            name: Office
          - entity: sensor.gym_pressure
            name: Gym
          - entity: sensor.garage_pressure
            name: Garage
          - entity: sensor.outside_pressure
            name: Outside            
#          - entity: sensor.bom_sunshine_coast_pressure_msl
#            name: BOM Sunshine Coast
      - type: history-graph
        title: Mould Graph
        hours_to_show: 48
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_mould
            name: Bedroom
          - entity: sensor.loungeroom_mould
            name: Loungeroom
          - entity: sensor.gym_mould
            name: Gym
          - entity: sensor.garage_mould
            name: Garage
      - type: history-graph
        title: Certificate
        hours_to_show: 2000
        refresh_interval: 30
        entities:
          - entity: sensor.chicane_me
            name: chicane.me
          - entity: sensor.home_chicane_me
            name: home.chicane.me
          - entity: sensor.whitehavendesignhouse_com_au
            name: whitehavendesignhouse.com.au
      - type: history-graph
        title: Power Graph
        hours_to_show: 48
        refresh_interval: 60
        entities:
          - entity: sensor.coffee_machine_load_power
            name: Coffee Machine
          - entity: sensor.cooking_light_load_power
            name: Cooking Light
          - entity: sensor.pc_speaker_load_power
            name: PC Speaker

  - title: Vacuum
    icon:  mdi:robot
    cards:
      #- type: picture-glance
      #  entities: 
      #   - camera.xiaomi_cloud_map_extractor
      #  title: Roborock Map
      #  camera_image: camera.xiaomi_cloud_map_extractor
#      - type: 'custom:vacuum-card'
#        entity: vacuum.roborock_s6_pure
#        stats:
#          default:
#            - entity_id: sensor.roborock_s6_pure_filter_left_hours
#              unit: hours
#              subtitle: Filter
#            - entity_id: sensor.roborock_s6_pure_side_brush_left_hours
#              unit: hours
#              subtitle: Side brush
#            - entity_id: sensor.roborock_s6_pure_main_brush_left_hours
#              unit: hours
#              subtitle: Main brush
#            - entity_id: sensor.roborock_s6_pure_sensor_dirty_left_hours
#              unit: hours
#              subtitle: Sensors
#          cleaning:
#            - entity_id: sensor.roborock_s6_pure_current_clean_area
#              unit: m2
#              subtitle: Cleaning area
#            - entity_id: sensor.roborock_s6_pure_current_clean_duration_mins
#              unit: minutes
#              subtitle: Cleaning time

      - type: vertical-stack
        cards:
        - type: custom:xiaomi-vacuum-map-card
          entity: vacuum.roborock_s6_pure
          vacuum_platform: humbertogontijo/homeassistant-roborock
          map_source:
            camera: camera.roborock_s6_pure_map   
          calibration_source:
            camera: true      
          map_modes:
            - template: vacuum_clean_zone
            - template: vacuum_goto
            - template: vacuum_clean_segment
              predefined_selections:
                - id: '16'
                  icon:
                    name: mdi:broom
                    x: 37200
                    'y': 35025
                  label:
                    text: Ensuite
                    x: 37200
                    'y': 35025
                    offset_y: 35
                  outline:
                    - - 35600
                      - 33250
                    - - 38800
                      - 33250
                    - - 38800
                      - 36800
                    - - 35600
                      - 36800
                - id: '17'
                  icon:
                    name: mdi:broom
                    x: 25950
                    'y': 37500
                  label:
                    text: Loungeroom
                    x: 25950
                    'y': 37500
                    offset_y: 35
                  outline:
                    - - 23550
                      - 35200
                    - - 28350
                      - 35200
                    - - 28350
                      - 39800
                    - - 23550
                      - 39800
                - id: '18'
                  icon:
                    name: mdi:broom
                    x: 34250
                    'y': 32200
                  label:
                    text: Dining Room
                    x: 34250
                    'y': 32200
                    offset_y: 35
                  outline:
                    - - 27300
                      - 24650
                    - - 41200
                      - 24650
                    - - 41200
                      - 39750
                    - - 27300
                      - 39750
                - id: '19'
                  icon:
                    name: mdi:broom
                    x: 25400
                    'y': 23575
                  label:
                    text: Office
                    x: 25400
                    'y': 23575
                    offset_y: 35
                  outline:
                    - - 23550
                      - 21950
                    - - 27250
                      - 21950
                    - - 27250
                      - 25200
                    - - 23550
                      - 25200
                - id: '20'
                  icon:
                    name: mdi:broom
                    x: 31300
                    'y': 24675
                  label:
                    text: Laundry
                    x: 31300
                    'y': 24675
                    offset_y: 35
                  outline:
                    - - 29950
                      - 21650
                    - - 32650
                      - 21650
                    - - 32650
                      - 27700
                    - - 29950
                      - 27700
                - id: '21'
                  icon:
                    name: mdi:broom
                    x: 26325
                    'y': 32225
                  label:
                    text: Kitchen
                    x: 26325
                    'y': 32225
                    offset_y: 35
                  outline:
                    - - 24100
                      - 29300
                    - - 28550
                      - 29300
                    - - 28550
                      - 35150
                    - - 24100
                      - 35150
                - id: '22'
                  icon:
                    name: mdi:broom
                    x: 23550
                    'y': 26600
                  label:
                    text: Gym
                    x: 23550
                    'y': 26600
                    offset_y: 35
                  outline:
                    - - 19650
                      - 23700
                    - - 27450
                      - 23700
                    - - 27450
                      - 29500
                    - - 19650
                      - 29500
                - id: '23'
                  icon:
                    name: mdi:broom
                    x: 41050
                    'y': 34000
                  label:
                    text: Master Bedroom
                    x: 41050
                    'y': 34000
                    offset_y: 35
                  outline:
                    - - 38850
                      - 31100
                    - - 43250
                      - 31100
                    - - 43250
                      - 36900
                    - - 38850
                      - 36900
                   
          #stats:
#        - type: custom:xiaomi-vacuum-map-card
#          entity: vacuum.roborock_s6_pure
#          map_source:
#            camera: camera.xiaomi_cloud_map_extractor
#          calibration_source:
#            camera: true
#          selection_type: PREDEFINED_RECTANGLE
#          predefined_selections:  
#          map_modes:
#             - template: vacuum_clean_zone_predefined
#               predefined_selections:
#                 - zones: [[27150,26450,29050,29000],[27650,19750,29200,26650]]
#                 - zones: [[23300,14800,29600,20100],[18200,10800,25900,16000]]
#                 - zones: [[29450,10750,33850,20400]]
#                 - zones: [[30650,18250,33500,20350]]
#                 - zones: [[25050,24100,27800,26550]]
#                 - zones: [[22600,19800,27800,23200],[25100,22800,27750,24150]]
#                 - zones: [[21150,23150,25150,26600]]
#                 - zones: [[21200,26400,27250,31100]]
#                 - zones: [[33231,10990,36425,14641]]
#             - template: vacuum_clean_zone
#             - template: vacuum_goto
#        - type: custom:button-card
#          name: Update Map
#          entity: script.roborock_update_map
#          tap_action:
#            action: toggle
            
       

  - title: 4 Week Graph
    icon: mdi:chart-areaspline-variant
    cards:
      - type: history-graph
        title: Temperature Graph
        hours_to_show: 672
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_temperature
            name: Bedroom
          - entity: sensor.office_temperature
            name: Office
          - entity: sensor.loungeroom_temperature
            name: Loungeroom  
          - entity: sensor.gym_temperature
            name: Gym
          - entity: sensor.garage_temperature
            name: Garage
          - entity: sensor.weather_pws_temperature
            name: Outside
#          - entity: sensor.bom_sunshine_coast_air_temp_c
#            name: BOM Sunshine Coast
      - type: history-graph
        title: Daily Rain Graph
        hours_to_show: 672
        refresh_interval: 60
        entities:
          - entity: sensor.weather_pws_precip_12am
            name: Rain
      - type: history-graph
        title: Monthly Rain Graph
        hours_to_show: 672
        refresh_interval: 60
        entities:
          - entity: sensor.rainfall_this_month
            name: Rain Sensor     

                
                       
      - type: history-graph
        title: Humidity Graph
        hours_to_show: 672
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_humidity
            name: Bedroom
          - entity: sensor.loungeroom_humidity
            name: Loungeroom
          - entity: sensor.office_humidity
            name: Office                  
          - entity: sensor.gym_humidity
            name: Gym
          - entity: sensor.garage_humidity
            name: Garage
          - entity: sensor.weather_pws_humidity
            name: Outside
      
#          - entity: sensor.bom_sunshine_coast_relative_humidity
#            name: BOM Sunshine Coast
      - type: history-graph
        title: Pressure Graph
        hours_to_show: 672
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_pressure
            name: Bedroom
          - entity: sensor.loungeroom_pressure
            name: Loungeroom
          - entity: sensor.office_pressure
            name: Office      
          - entity: sensor.gym_pressure
            name: Gym
          - entity: sensor.garage_pressure
            name: Garage
#          - entity: sensor.bom_sunshine_coast_pressure_msl
#            name: BOM Sunshine Coast
      - type: history-graph
        title: Mould Graph
        hours_to_show: 672
        refresh_interval: 60
        entities:
          - entity: sensor.bedroom_mould
            name: Bedroom
          - entity: sensor.loungeroom_mould
            name: Loungeroom
          - entity: sensor.gym_mould
            name: Gym
          - entity: sensor.garage_mould
            name: Garage

  #- title: Remote
  #  icon: mdi:remote
  #  cards:
  #    #- type: entities
  #    #  title: Living Room
  #    #  show_header_toggle: false
  #    #  entities:
  #    #    - remote.living_room
  #    #    - switch.living_room_harmony_watch_tv
  #    #    - switch.living_room_harmony_watch_apple_tv
  #    #    - switch.living_room_harmony_watch_smart_tv
  #    #    - script.harm_living_channel_13
  #    #    - script.harm_living_channel_90
  #    #    - script.harm_living_channel_70
  #    #    - script.harm_living_channel_24
  #    #- type: media-control
  #    #  entity: media_player.fire_tv
  #    #- type: iframe
  #   #   title: "Cams"
  #    #  url: "http://10.0.1.3:38090"
  #    - type: picture-glance
  #      title: Test Cam
  #      entities: []
  #      camera_image: camera.iphone
  #      camera_view: live
  #    #- type: media-control
  #    #  entity: media_player.loungeroom

  - title: Stats
    icon: mdi:counter
    cards:
      - type: vertical-stack
        cards:  
        - type: entities
          title: Server
          show_header_toggle: false
          entities:
            - sensor.server_lastboot
            - sensor.server_ram_free
            - sensor.server_raid_capacity
            - sensor.server_raid_free
            - sensor.server_torrents_capacity
            - sensor.server_torrents_free

       # - type: history-graph
       #   entities:
       #     - entity: sensor.server_cpu
       #       name: Server CPU Used
        - type: custom:mini-graph-card
          name: Server CPU Used
          hours_to_show: 72
          points_per_hour: 25
          entities:
            - entity: sensor.server_cpu
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 25
              color: "#9CCC65"
            - value: 50
              color: "#f39c12"
            - value: 100
              color: "#F44336"    
         #upper_bound: 100     
          smoothing: true  
          height: 300       
#            - sensor.server_cpu_2
#            - sensor.server_cpu_3
#            - sensor.server_cpu_4
#            - sensor.server_cpu_avg
        - type: custom:mini-graph-card
          name: Server RAM Used
          hours_to_show: 72
          points_per_hour: 25
          entities:
            - entity: sensor.server_ram
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 25
              color: "#5DADE2"
            - value: 50
              color: "#9CCC65"
            - value: 75
              color: "#f39c12"
            - value: 100
              color: "#F44336"
          #upper_bound: 100  
          smoothing: true    
          height: 300
        #- type: history-graph
        #  entities:
        #    - entity: sensor.server_ram
        #      name: Server RAM Used
      
      - type: vertical-stack
        cards:
        - type: entities
          title: Port Forwards  
          entities: 
            - entity: switch.port_forward_assetto_corsa
              name: Assetto Corsa Server on Server
              icon: mdi:network
            - type: divider 
            - entity: switch.pfsense_home_nat_port_forward_rule_1295623011_chic_rdp
              name: Chicane RDP
            - entity: switch.pfsense_home_nat_port_forward_rule_1295623072_vm_ssh
              name: UbuntuVM SSH
            - entity: switch.pfsense_home_nat_port_forward_rule_1295623100_airvideo
              name: Air Video
            - entity: switch.port_forward_ftp
              name: Server FTP
              icon: mdi:network
            - entity: switch.pfsense_home_nat_port_forward_rule_1295623183_ser_qbit_web
              name: Qbittorrent Web Interface
            - entity: switch.port_forward_rfactor
              name: RFactor Server on Server
              icon: mdi:network
            - entity: switch.port_forward_sunshine
              name: Sunshine/Moonlight
              icon: mdi:network
        - type: custom:mini-graph-card
          name: WAN Inbound Bandwidth
          entities:
            - entity: sensor.pfsense_home_interface_wan_inbytes_kilobytes_per_second
          hours_to_show: 72
          points_per_hour: 20
          #color_thresholds:
          #  - value: 0
          #    color: "#5DADE2"
          #  - value: 15
          #    color: "#5DADE2"
          #  - value: 24
          #    color: "#9CCC65"
          #  - value: 30
          #    color: "#F44336"
          show:
            labels: true      
        - type: custom:mini-graph-card
          name: WAN Outbound Bandwidth
          entities:
            - entity: sensor.pfsense_home_interface_wan_outbytes_kilobytes_per_second
          hours_to_show: 72
          points_per_hour: 20
          #color_thresholds:
          #  - value: 0
          #    color: "#5DADE2"
          #  - value: 15
          #    color: "#5DADE2"
          #  - value: 24
          #    color: "#9CCC65"
          #  - value: 30
          #    color: "#F44336"
          show:
            labels: true                  
      - type: vertical-stack
        cards:
        - type: custom:mini-graph-card
          name: Router CPU
          hours_to_show: 24
          points_per_hour: 25
          entities:
            - entity: sensor.pfsense_home_cpu_usage
          color_thresholds:
            - value: 0
              color: "#5DADE2"
            - value: 25
              color: "#5DADE2"
            - value: 50
              color: "#9CCC65"
            - value: 100
              color: "#F44336"    
          show:
            labels: true    
          height: 300            
        - type: custom:mini-graph-card
          name: Router CPU
          hours_to_show: 24
          points_per_hour: 25
          entities:
            - entity: sensor.pfsense_home_system_load_average_one_minute
              color: "#5dade2"
            - entity: sensor.pfsense_home_system_load_average_five_minute
              color: "#f9e79f"
            - entity: sensor.pfsense_home_system_load_average_fifteen_minute
              color: "#ec7063"
          show:
            labels: true          
          height: 300      

 
          #color_thresholds:
          #  - value: 0
          #    color: "#5DADE2"
          #  - value: 1
          #    color: "#5DADE2"
          #  - value: 2
          #    color: "#9CCC65"
          #  - value: 3
          #    color: "#F44336"     
            

  - title: Presence
    icon: mdi:account-multiple-check
    cards:
      - type: entities
        title: At Home iOS App
        show_header_toggle: true
        entities:
          - person.danny
          - person.liz
      - type: entities
        title: At Home HomeKit
        show_header_toggle: true
        entities:
          - input_boolean.dannyhome
          - input_boolean.lizhome
      - type: history-graph
        hours_to_show: 72
        entities:
          - person.danny
          - input_boolean.dannyhome
          - person.liz
          - input_boolean.lizhome


  - title: Batteries
    icon: mdi:battery-charging
    cards:
      - type: entities
        title: Xiaomi Batteries
        show_header_toggle: false
        entities:
          - sensor.battery_bedroom_motion
          - sensor.battery_wardrobe_motion
          - sensor.battery_pantry_motion
          - sensor.battery_danny_bed_switch
          - sensor.battery_liz_bed_switch
          - sensor.battery_switch_door_bell
          - sensor.battery_outside_door_sensor
          - sensor.battery_outside_screen_door_sensor
         # - sensor.battery_outside_temp_sensor
          - sensor.battery_garage_door_sensor
          - sensor.philips_switch_1_power

  - title: ZHA
    icon: mdi:lan
    panel: true
    cards:
      - type: 'custom:zha-network-card'
        clickable: true
        columns:
          - name: Name
            prop: name
          - attr: available
            id: available
            modify: x || "false"
            name: Online
          - attr: manufacturer
            name: Manufacturer
          - attr: model
            name: Model
          - attr: ieee
            name: IEEE
          - name: NWK
            prop: nwk
          - attr: rssi
            name: RSSI
          - attr: lqi
            name: LQI
          - attr: last_seen
            name: Last Seen
          - attr: power_source
            name: Power Source
          - attr: quirk_class
            name: Quirk
        sort_by: available
        